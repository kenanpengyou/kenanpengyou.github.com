---
layout: post
title: "“位置”在css里的细节"
category: "css"
description: ""
---
{% include JB/setup %}

##位置是个怎样的概念##

哎，这个元素怎么跑那里去了？

回想一下，在我们觉得“样式崩了”，“页面出bug了”的时候，是不是会有相当一部分情况都可以描述成上面这句话呢？

我们在写css的时候，就会经常考虑“位置”这个事。理念就是，**所有的页面元素都应该被安排在为它预定的位置上**。毕竟按照计划预定的来，才能有条不紊，不容易出错。

就像一本杂志的编辑，即便文稿都已准备好，但具体哪篇放在第几页的哪里，是要认真考虑的。好的杂志应该有好的排版。

下面，本文将介绍一些会影响到“位置”，但一般不太会知道的要点。

##盒模型的再认识##

盒模型你一定很熟悉：

![盒模型][img_boxdim]

在`content`、`padding`、`border`、`margin`这些区域之外，请注意图中的`edge`，也就是分隔盒模型各区域的边。在确定页面元素的准确位置时，需要细致地参考这些边。它们按照范围从小到大分别是：

- **content edge**，也叫做**inner edge**（注意和JavaScript的`innerWidth`等区别开）。它围成的区域代表内容区，一般由元素内的具体内容决定。它确定的范围也是css属性`box-sizing`里的`content-box`的范围。
- **padding edge**。它确定`padding-box`的范围。尽管w3c规范已经从`box-sizing`移除了这个值，但很适合类比去理解。
- **border edge**。它确定`border-box`的范围。
- **margin edge**，也叫做**outer edge**。它确定`margin-box`的范围。类似的，`box-sizing`并没有这个值。

为什么需要了解这些边呢？想象一下你想要放置一个元素到你为它安排的位置上，但是，你拿的元素并不是一个点（比如物理学里的质点），而是一个盒子。一个占据一定空间的盒子，如果没有边作为参照，你能清楚地知道应该怎样去对齐吗？

##background##

背景是很常用的样式，但请注意几个地方。

背景分为背景图（`background-image`）和背景色（`background-color`），渐变（css gradients）也属于背景图。其中，背景图位于背景色之上。如果使用多个背景图（multiple backgrounds），声明靠前的位于上方。

除`background-clip`之外的其他背景属性，如`background-position`、`background-size`等，都只作用于背景图，对背景色没有作用。这是可以理解的，因为背景色很单纯，它没有起点和终点，总是铺满整个空间，要么有，要么没有。

在默认情况下，一个元素的css：

{% highlight css %}
.bg-element{
    width: 100px;
    height: 100px;
    margin: 20px;
    padding: 20px;
    border: 5px dashed #386365;
    background: #2aace9 url(pattern.png) no-repeat;
}
{% endhighlight %}

这是一个同时有背景图和背景色的元素，其效果是：

![默认情况的背景范围][img_background_default]

背景色的范围是border box，




[包含块][]是一个逻辑矩形框，用于css的定位及尺寸的计算。它和盒模型的关系可以这样描述：一个DOM元素对应一个盒模型，盒模型的padding edge标明了该DOM元素创建的包含块范围，该DOM元素的子元素（以及这些子元素的盒模型）一般以这个包含块作为容器。



##结语##

[img_boxdim]: {{POSTS_IMG_PATH}}/201510/boxdim.png "盒模型"
[img_background_default]: {{POSTS_IMG_PATH}}/201510/background_default.png "默认情况的背景范围"

[包含块]: http://w3help.org/zh-cn/kb/008/ "KB008: 包含块( Containing block )  - W3Help"
